@model Riksdan.Models.RiksdanModel.JsonData;

@{
    var RiksdagsList = Model.JsonObject.Persons;
    RiksdagsList.Sort((x, y) => x.Party.CompareTo(y.Party));
    var PartyList = RiksdagsList.Select(x => x.Party).Distinct();
    string FullPartyName = "";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Riksdagspolitiker</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
</head>
<body>
    <h1>Sveriges Riksdag</h1>
    @foreach (string party in PartyList)
    {
        var PartyPersonList = RiksdagsList.Where(x => x.Party == party);
        <div class="party-div" id=@party>
            @switch (party)
            {
                case "C":
                    FullPartyName = "Centerpartiet";
                    break;
                case "KD":
                    FullPartyName = "Kristdemokraterna";
                    break;
                case "L":
                    FullPartyName = "Liberalerna";
                    break;
                case "MP":
                    FullPartyName = "Miljöpartiet de gröna";
                    break;
                case "M":
                    FullPartyName = "Moderata samlingspartiet";
                    break;
                case "S":
                    FullPartyName = "Socialdemokraterna";
                    break;
                case "SD":
                    FullPartyName = "Sverigedemokraterna";
                    break;
                case "V":
                    FullPartyName = "Vänsterpartiet";
                    break;
                case "-":
                    FullPartyName = "Partilös";
                    break;
                default:
                    FullPartyName = "Övriga";
                    break;
            }
            <div class="flexbox-row party-header">
                <img src="@string.Format("/images/" + party + ".png")" alt="Partilogo" />
                <h2>@FullPartyName</h2>
            </div>
            <div class="flexbox-row">
                @foreach (var person in PartyPersonList)
                {
                    <div class="flexbox-column person-item">
                        <img src="@person.ImageUrlSmall" alt="Porträttfoto" />
                        @person.FirstName
                        @person.LastName
                    </div>
                }
            </div>
        </div>
    }

    <div class="fixed-buttons flexbox-column">
        <span>Filtrera partier</span>
        @foreach (string party in PartyList)
        {
            @if (party == "-")
            {
                <button type="button" onclick="toggleParty(this, '@party')" >
                    PL
                </button>
            }
            else
            {
                <button type="button" onclick="toggleParty(this, '@party')" >
                    @party
                </button>
            }
        }
    </div>
    <script src="~/js/site.js"></script>
</body>
</html>
